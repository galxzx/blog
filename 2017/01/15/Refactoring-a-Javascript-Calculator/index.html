<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Refactoring a Javascript Calculator | From 1000 AD to Fullstack Developer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Refactoring a simple calculator web appThe WhyBefore I started Fullstack Academy, I had gone through most of the Free Code Camp front end curriculum. One thing that I found I was missing is a general">
<meta property="og:type" content="article">
<meta property="og:title" content="Refactoring a Javascript Calculator">
<meta property="og:url" content="https://galxzx.github.io/blog/2017/01/15/Refactoring-a-Javascript-Calculator/index.html">
<meta property="og:site_name" content="From 1000 AD to Fullstack Developer">
<meta property="og:description" content="Refactoring a simple calculator web appThe WhyBefore I started Fullstack Academy, I had gone through most of the Free Code Camp front end curriculum. One thing that I found I was missing is a general">
<meta property="og:updated_time" content="2017-01-15T22:05:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Refactoring a Javascript Calculator">
<meta name="twitter:description" content="Refactoring a simple calculator web appThe WhyBefore I started Fullstack Academy, I had gone through most of the Free Code Camp front end curriculum. One thing that I found I was missing is a general">
  
    <link rel="alternate" href="/atom.xml" title="From 1000 AD to Fullstack Developer" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">From 1000 AD to Fullstack Developer</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">Learning at Fullstack Academy</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://galxzx.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Refactoring-a-Javascript-Calculator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/01/15/Refactoring-a-Javascript-Calculator/" class="article-date">
  <time datetime="2017-01-15T19:02:57.000Z" itemprop="datePublished">2017-01-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Refactoring a Javascript Calculator
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Refactoring-a-simple-calculator-web-app"><a href="#Refactoring-a-simple-calculator-web-app" class="headerlink" title="Refactoring a simple calculator web app"></a>Refactoring a simple calculator web app</h2><h3 id="The-Why"><a href="#The-Why" class="headerlink" title="The Why"></a>The Why</h3><p>Before I started Fullstack Academy, I had gone through most of the Free Code Camp front end curriculum. One thing that I found I was missing is a general best practices. It never occurred to me that a calculator could be an object with methods even though I knew how to create objects with method. Free Code Camp gives you some basic tools, but doesn’t tell you if you’re making something smart or just making it hacky.</p>
<p>Anyway, I’ve decided to refactor the JS, JQuery calculator web app I made for Free Code Camp using a calculator object. If time allows, I will refactor it again as a parser, because… why not?</p>
<p>The original code pen of the original version can be found here: <a href="http://codepen.io/galxzx/pen/ObWvYx" target="_blank" rel="external">Simple Javascript Calculator</a></p>
<h3 id="The-calculator-object"><a href="#The-calculator-object" class="headerlink" title="The calculator object"></a>The calculator object</h3><p>In my original version, on each operation, I was putting the total, operator, and new input into a string and evaluating. I had the text field set up so you could only input by button to prevent errors, so this also would have prevented any hacking being done through the input. But honestly, I didn’t even know at the time that a hacker could enter code in a text input that is then passed into an eval statement.</p>
<p>In the object version I created a calculator object with a total, a next,  and methods to add, subtract, multiply, and divide. Other functionality that was in my original calculator include clear all, clear entry, backspace, and +/-.</p>
<h4 id="Clearing-the-calculator"><a href="#Clearing-the-calculator" class="headerlink" title="Clearing the calculator"></a>Clearing the calculator</h4><p>Using the object method seems have simplified clearing the calculator, I can just make a new calculator.</p>
<h4 id="Adding-functionality"><a href="#Adding-functionality" class="headerlink" title="Adding functionality"></a>Adding functionality</h4><p>Each operation button will need to grab the current input value, run the last operation, clear the next value and save the current operation.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'#plus'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(calc.lastOperation)&#123;</div><div class="line">    calc.lastOperation(+calc.next);</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">    calc.setTotal(+calc.next);</div><div class="line">  &#125;</div><div class="line">  $(<span class="string">'#numberIn'</span>).val(calc.getTotal());</div><div class="line">  calc.next = <span class="string">""</span>;</div><div class="line">  calc.lastOperation = calc.add;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>I then created a runLast function to complete the first 6 lines in the plus click function and used that for minus, divide, multiply, and equals.<br>All the basic functionality of a calculator is now there.</p>
<h3 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h3><p>-I attempted to add the click functions to the number button with a loop but it wasn’t working. I could figure this out.<br>-I could wrap the entire javascript, not just the calculator, inside an object. This would be a good exercise in ‘this’, binding, and arrow functions.<br>-When you click the equals button it stops the chaining and you have to start over. This is a little buggy as you may want to do an operation on your result.</p>
<p>-Rewrite the calculator as a parser that can handle parentheses.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://galxzx.github.io/blog/blog/2017/01/15/Refactoring-a-Javascript-Calculator/" data-id="cj0ce66x50004t5fnry13kii9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2017/01/22/Setting-up-an-Express-server-in-Node/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Setting up an Express server in Node
        
      </div>
    </a>
  
  
    <a href="/blog/2017/01/12/Big-O-and-Sorting-Algorithms/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Big O and Sorting Algorithms</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/distance-sequelize-postgresql-postgis/">distance, sequelize, postgresql, postgis</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/distance-sequelize-postgresql-postgis/" style="font-size: 10px;">distance, sequelize, postgresql, postgis</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/01/">January 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2017/03/15/Distance-Based-Queries-with-PostgreSQL-PostGIS-and-Sequelize/">Distance Based Queries with PostgreSQL, PostGIS, and Sequelize</a>
          </li>
        
          <li>
            <a href="/blog/2017/01/22/Setting-up-an-Express-server-in-Node/">Setting up an Express server in Node</a>
          </li>
        
          <li>
            <a href="/blog/2017/01/15/Refactoring-a-Javascript-Calculator/">Refactoring a Javascript Calculator</a>
          </li>
        
          <li>
            <a href="/blog/2017/01/12/Big-O-and-Sorting-Algorithms/">Big O and Sorting Algorithms</a>
          </li>
        
          <li>
            <a href="/blog/2017/01/10/Fullstack-Academy-First-Impressions/">Fullstack Academy First Impressions</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Corryn Young<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>

  </div>
</body>
</html>